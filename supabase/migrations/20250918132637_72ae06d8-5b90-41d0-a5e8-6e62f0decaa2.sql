-- Insert fictive orders with correct statuses
INSERT INTO public.orders (
  id,
  user_id,
  order_number,
  status,
  payment_status,
  total_amount,
  billing_address,
  shipping_address,
  created_at,
  updated_at,
  notes
) VALUES 
(
  gen_random_uuid(),
  (SELECT user_id FROM public.profiles WHERE email = 'iryna.but@epitech.digital' LIMIT 1),
  'ORD-1001',
  'shipped',
  'paid',
  120.00,
  '{"street": "12 Rue Exemple", "city": "Paris", "postal_code": "75001", "country": "France"}',
  '{"street": "Point Relais - Mondial Relay - 45 Av. Exemple", "city": "Paris", "postal_code": "75002", "country": "France"}',
  '2025-08-15 10:00:00+00',
  '2025-08-15 10:00:00+00',
  'Commande expédiée via Mondial Relay'
),
(
  gen_random_uuid(),
  (SELECT user_id FROM public.profiles WHERE email = 'iryna.but@epitech.digital' LIMIT 1),
  'ORD-1002', 
  'delivered',
  'paid',
  89.99,
  '{"street": "25 Boulevard Saint-Martin", "city": "Paris", "postal_code": "75003", "country": "France"}',
  '{"street": "25 Boulevard Saint-Martin", "city": "Paris", "postal_code": "75003", "country": "France"}',
  '2025-08-10 14:30:00+00',
  '2025-08-10 14:30:00+00',
  'Commande livrée'
),
(
  gen_random_uuid(),
  (SELECT user_id FROM public.profiles WHERE email = 'but_iryna@inbox.ru' LIMIT 1),
  'ORD-1003',
  'processing',
  'paid', 
  150.50,
  '{"street": "78 Rue de la République", "city": "Lyon", "postal_code": "69002", "country": "France"}',
  '{"street": "78 Rue de la République", "city": "Lyon", "postal_code": "69002", "country": "France"}',
  '2025-08-18 09:15:00+00',
  '2025-08-18 09:15:00+00',
  'Commande en préparation'
);

-- Insert fictive invoices matching the orders
INSERT INTO public.invoices (
  id,
  invoice_number,
  type,
  order_id,
  supplier_name,
  supplier_contact,
  total_amount,
  unit_price,
  quantity,
  status,
  payment_method,
  currency,
  due_date,
  paid_date,
  created_at,
  updated_at,
  metadata
) VALUES 
(
  gen_random_uuid(),
  'FACT-CLT-1001',
  'client',
  (SELECT id FROM public.orders WHERE order_number = 'ORD-1001'),
  NULL,
  NULL,
  120.00,
  120.00,
  1,
  'paid',
  'credit_card',
  'EUR',
  '2025-08-15 10:00:00+00',
  '2025-08-15 10:00:00+00',
  '2025-08-15 10:00:00+00',
  '2025-08-15 10:00:00+00',
  '{"client_name": "Iryna But", "client_email": "iryna.but@epitech.digital", "product_name": "ED Sneaker White", "tracking_number": "MR-TRK-123456"}'
),
(
  gen_random_uuid(),
  'FACT-CLT-1002', 
  'client',
  (SELECT id FROM public.orders WHERE order_number = 'ORD-1002'),
  NULL,
  NULL,
  89.99,
  89.99,
  1,
  'paid',
  'paypal',
  'EUR',
  '2025-08-10 14:30:00+00',
  '2025-08-10 14:30:00+00', 
  '2025-08-10 14:30:00+00',
  '2025-08-10 14:30:00+00',
  '{"client_name": "Iryna But", "client_email": "iryna.but@epitech.digital", "product_name": "Nike Air Max"}'
),
(
  gen_random_uuid(),
  'FACT-CLT-1003',
  'client', 
  (SELECT id FROM public.orders WHERE order_number = 'ORD-1003'),
  NULL,
  NULL,
  150.50,
  150.50,
  1,
  'paid',
  'bank_transfer',
  'EUR',
  '2025-08-18 09:15:00+00',
  '2025-08-18 09:15:00+00',
  '2025-08-18 09:15:00+00',
  '2025-08-18 09:15:00+00',
  '{"client_name": "Vendeur Test", "client_email": "but_iryna@inbox.ru", "product_name": "Adidas Ultraboost"}'
),
(
  gen_random_uuid(),
  'FACT-FRN-2001',
  'supplier',
  NULL,
  'Nike France',
  'contact@nike.fr',
  850.00,
  85.00,
  10,
  'paid',
  'credit_card',
  'EUR',
  '2025-08-12 08:00:00+00',
  '2025-08-12 08:00:00+00',
  '2025-08-12 08:00:00+00',
  '2025-08-12 08:00:00+00',
  '{"restock_batch": "RST-20250812", "product_name": "Nike Air Max", "delivery_date": "2025-08-17"}'
),
(
  gen_random_uuid(), 
  'FACT-FRN-2002',
  'supplier',
  NULL,
  'Adidas Europe',
  'commandes@adidas.eu',
  1640.00,
  82.00,
  20,
  'paid',
  'bank_transfer',
  'EUR',
  '2025-08-14 12:00:00+00',
  '2025-08-14 12:00:00+00',
  '2025-08-14 12:00:00+00', 
  '2025-08-14 12:00:00+00',
  '{"restock_batch": "RST-20250814", "product_name": "Adidas Ultraboost", "delivery_date": "2025-08-18"}'
);

-- Add some order items for the orders
INSERT INTO public.order_items (
  id,
  order_id,
  product_id,
  variant_id,
  quantity,
  unit_price,
  total_price,
  created_at
) VALUES 
(
  gen_random_uuid(),
  (SELECT id FROM public.orders WHERE order_number = 'ORD-1001'),
  (SELECT id FROM public.products LIMIT 1),
  (SELECT id FROM public.product_variants LIMIT 1),
  1,
  120.00,
  120.00,
  '2025-08-15 10:00:00+00'
),
(
  gen_random_uuid(),
  (SELECT id FROM public.orders WHERE order_number = 'ORD-1002'),
  (SELECT id FROM public.products LIMIT 1 OFFSET 1),
  (SELECT id FROM public.product_variants LIMIT 1 OFFSET 1),
  1,
  89.99,
  89.99,
  '2025-08-10 14:30:00+00'
),
(
  gen_random_uuid(),
  (SELECT id FROM public.orders WHERE order_number = 'ORD-1003'),
  (SELECT id FROM public.products LIMIT 1 OFFSET 2),
  (SELECT id FROM public.product_variants LIMIT 1 OFFSET 2),
  1,
  150.50,
  150.50,
  '2025-08-18 09:15:00+00'
);